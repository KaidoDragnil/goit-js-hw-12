{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst searchForm = document.querySelector('.image-search-form');\nconst searchInput = document.querySelector('.image-search-name');\nconst loaderContainer = document.querySelector('.loader-container');\nconst gallery = document.querySelector('.gallery');\nconst moreBtn = document.querySelector('.more-button');\n\nfunction showLoader() {\n  loaderContainer.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loaderContainer.style.display = 'none';\n}\n\nlet currentPage = 1;\nconst perPage = 40;\nlet searchQ = '';\n\nasync function searchImages(query, currentPage) {\n  searchQ = query;\n  const requestParams = {\n    key: '41964053-c955e63b08cf707b650cdfd9b',\n    q: searchQ,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: perPage,\n  };\n  const searchParams = new URLSearchParams(requestParams);\n\n  showLoader();\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    hideLoader();\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionDelay: 250,\n      captionsData: 'alt',\n      close: true,\n    });\n    lightbox.refresh();\n    const { hits, totalHits } = response.data;\n    if (currentPage === 1) {\n      gallery.innerHTML = '';\n    }\n\n    const galleryHtml = hits.reduce(\n      (html, image) =>\n        html +\n        `<a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\"\n                alt=\"${image.tags}\"\n            />\n           <ul class=\"gallery-info-list\">\n              <li class=\"gallery-info-item\">\n                  <p class=\"gallery-info-title\">Likes</p>\n                  <p class=\"gallery-info-value\">${image.likes}</p>\n              </li>\n              <li class=\"gallery-info-item\">\n                  <p class=\"gallery-info-title\">Views</p>\n                  <p class=\"gallery-info-value\">${image.views}</p>\n              </li>\n              <li class=\"gallery-info-item\">\n                  <p class=\"gallery-info-title\">Comments</p>\n                  <p class=\"gallery-info-value\">${image.comments}</p>\n              </li>\n              <li class=\"gallery-info-item\">\n                  <p class=\"gallery-info-title\">Downloads</p>\n                  <p class=\"gallery-info-value\">${image.downloads}</p>\n              </li>\n            </ul>\n        </a>`,\n      ''\n    );\n    gallery.insertAdjacentHTML('beforeend', galleryHtml);\n    lightbox.refresh();\n    if (totalHits <= currentPage * perPage) {\n      moreBtn.style.display = 'none';\n      iziToast.error({\n        title: 'Error',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      moreBtn.style.display = 'block';\n      const linkImage = document.querySelector('.gallery-link');\n      const scrollImageHight = linkImage.getBoundingClientRect().height;\n      window.scrollBy({\n        top: scrollImageHight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n}\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = searchInput.value.trim();\n  currentPage = 1;\n  searchImages(query, currentPage);\n  searchForm.reset();\n});\nmoreBtn.addEventListener('click', () => {\n  currentPage += 1;\n  searchImages(searchQ, currentPage);\n});\n"],"names":["searchForm","searchInput","loaderContainer","gallery","moreBtn","showLoader","hideLoader","currentPage","perPage","searchQ","searchImages","query","requestParams","searchParams","response","axios","lightbox","SimpleLightbox","hits","totalHits","galleryHtml","html","image","iziToast","scrollImageHight","error","event"],"mappings":"owBAMA,MAAMA,EAAa,SAAS,cAAc,oBAAoB,EACxDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAkB,SAAS,cAAc,mBAAmB,EAC5DC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,cAAc,EAErD,SAASC,GAAa,CACpBH,EAAgB,MAAM,QAAU,OAClC,CAEA,SAASI,GAAa,CACpBJ,EAAgB,MAAM,QAAU,MAClC,CAEA,IAAIK,EAAc,EAClB,MAAMC,EAAU,GAChB,IAAIC,EAAU,GAEd,eAAeC,EAAaC,EAAOJ,EAAa,CAC9CE,EAAUE,EACV,MAAMC,EAAgB,CACpB,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMF,EACN,SAAUC,CACd,EACQK,EAAe,IAAI,gBAAgBD,CAAa,EAEtDP,IACA,GAAI,CACF,MAAMS,EAAW,MAAMC,EAAM,IAC3B,4BAA4BF,GAClC,EACIP,IACA,MAAMU,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,MACd,MAAO,EACb,CAAK,EACDD,EAAS,QAAO,EAChB,KAAM,CAAE,KAAAE,EAAM,UAAAC,GAAcL,EAAS,KACjCP,IAAgB,IAClBJ,EAAQ,UAAY,IAGtB,MAAMiB,EAAcF,EAAK,OACvB,CAACG,EAAMC,IACLD,EACA,iCAAiCC,EAAM;AAAA;AAAA;AAAA,uBAGxBA,EAAM;AAAA,uBACNA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,kDAKqBA,EAAM;AAAA;AAAA;AAAA;AAAA,kDAINA,EAAM;AAAA;AAAA;AAAA;AAAA,kDAINA,EAAM;AAAA;AAAA;AAAA;AAAA,kDAINA,EAAM;AAAA;AAAA;AAAA,cAIlD,EACN,EAGI,GAFAnB,EAAQ,mBAAmB,YAAaiB,CAAW,EACnDJ,EAAS,QAAO,EACZG,GAAaZ,EAAcC,EAC7BJ,EAAQ,MAAM,QAAU,OACxBmB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6DACT,SAAU,UAClB,CAAO,MACI,CACLnB,EAAQ,MAAM,QAAU,QAExB,MAAMoB,EADY,SAAS,cAAc,eAAe,EACrB,sBAAqB,EAAG,OAC3D,OAAO,SAAS,CACd,IAAKA,EAAmB,EACxB,SAAU,QAClB,CAAO,CACF,CACF,OAAQC,EAAP,CACAnB,IACAiB,EAAS,MAAM,CACb,MAAO,QACP,QAASE,EAAM,QACf,SAAU,UAChB,CAAK,CACF,CACH,CAEAzB,EAAW,iBAAiB,SAAU0B,GAAS,CAC7CA,EAAM,eAAc,EACpB,MAAMf,EAAQV,EAAY,MAAM,KAAI,EACpCM,EAAc,EACdG,EAAaC,EAAOJ,CAAW,EAC/BP,EAAW,MAAK,CAClB,CAAC,EACDI,EAAQ,iBAAiB,QAAS,IAAM,CACtCG,GAAe,EACfG,EAAaD,EAASF,CAAW,CACnC,CAAC"}